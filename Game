<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> Puzzle</title>
<style>
  body {
    display: flex;
    flex-dir: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    background: #111;
    color: #fff;
    font-family: 'Segoe UI', sans-serif;
  }
  #game {
    margin-top: 90px;
    display: grid;
    grid-template-columns: repeat(4, 80px);
    grid-template-rows: repeat(4, 80px);
    gap: 10px;
    background: #222;
    padding: 10px;
    border-radius: 10px;
  }
  .cell {
    width: 80px;
    height: 80px;
    background: #333;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: bold;
    transition: background 0.3s;
  }
  .tile-2 { background: #3a3a3a; color: #eee; }
  .tile-4 { background: #505050; color: #fff; }
  .tile-8 { background: #005f73; }
  .tile-16 { background: #0a9396; }
  .tile-32 { background: #94d2bd; color: #111; }
  .tile-64 { background: #ee9b00; color: #111; }
  .tile-128 { background: #ca6702; }
  .tile-256 { background: #bb3e03; }
  .tile-512 { background: #ae2012; }
  .tile-1024 { background: #9b2226; }
  .tile-2048 { background: #ff006e; color: #fff; }
span{
  font-size:30px;
}
  .controls {
    display: grid;
    grid-template-columns: repeat(3, 60px);
    grid-template-rows: repeat(3, 60px);
    gap: 10px;
    margin-top: 20px;
    justify-content: center;
  }
  .controls button {
    background: #444;
    color: white;
    font-size: 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .controls button:hover {
    background: #666;
  }
  .up { grid-column: 2; grid-row: 1; }
  .left { grid-column: 1; grid-row: 2; }
  .right { grid-column: 3; grid-row: 2; }
  .down { grid-column: 2; grid-row: 3; }
</style>
</head>
<body>
  
  <div id="game"></div>
  <div class="controls">
    <button class="up"><span>&#8679;</span></button>
    <button class="left"><span >&#8678;</span></button>
    <button class="right"><span >&#8680;</span></button>
    <button class="down"><span >&#8681;</span></button>
  </div>
  <script>
    const size = 4;
    let board = Array.from({ length: size }, () => Array(size).fill(0));

    function init() {
      tileView();
      tilebox();
    }

    function tileView() {
      let empty = [];
      for (let fr = 0; fr < size; fr++) {
        for (let lt = 0; lt < size; lt++) {
          if (board[fr][lt] === 0) empty.push({ fr, lt });
        }
      }
      if (empty.length === 0) return;
      const { fr, lt } = empty[Math.floor(Math.random() * empty.length)];
      board[fr][lt] = 2;
    }

    function tilebox() {
      const game = document.getElementById('game');
      game.innerHTML = '';
      for (let j = 0; j < size; j++) {
        for (let i = 0; i < size; i++) {
          const cell = document.createElement('div');
          cell.classList.add('cell');
          const value = board[j][i];
          if (value !== 0) {
            cell.textContent = value;
            cell.classList.add(`tile-${value}`);
          }
          game.appendChild(cell);
        }
      }
    }

    function slide(row) {
      let arr = row.filter(v => v);
      for (let i = 0; i < arr.length - 1; i++) {
        if (arr[i] === arr[i + 1]) {
          arr[i] *= 2;
          arr[i + 1] = 0;
        }
      }
      arr = arr.filter(v => v);
      while (arr.length < size) arr.push(0);
      return arr;
    }

    function move(dir) {
      let moved = false;
      if (dir === 'left') {
        for (let r = 0; r < size; r++) {
          const newRow = slide(board[r]);
          if (newRow.toString() !== board[r].toString()) moved = true;
          board[r] = newRow;
        }
      } else if (dir === 'right') {
        for (let r = 0; r < size; r++) {
          const rev = [...board[r]].reverse();
          const newRow = slide(rev).reverse();
          if (newRow.toString() !== board[r].toString()) moved = true;
          board[r] = newRow;
        }
      } else if (dir === 'up') {
        for (let c = 0; c < size; c++) {
          let col = board.map(row => row[c]);
          const newCol = slide(col);
          for (let r = 0; r < size; r++) {
            if (board[r][c] !== newCol[r]) moved = true;
            board[r][c] = newCol[r];
          }
        }
      } else if (dir === 'down') {
        for (let c = 0; c < size; c++) {
          let col = board.map(row => row[c]).reverse();
          const newCol = slide(col).reverse();
          for (let r = 0; r < size; r++) {
            if (board[r][c] !== newCol[r]) moved = true;
            board[r][c] = newCol[r];
          }
        }
      }
      if (moved) {
        tileView();
        tilebox();
      }
    }

    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') move('left');
      if (e.key === 'ArrowRight') move('right');
      if (e.key === 'ArrowUp') move('up');
      if (e.key === 'ArrowDown') move('down');
    });

    document.querySelector('.up').onclick = () => move('up');
    document.querySelector('.down').onclick = () => move('down');
    document.querySelector('.left').onclick = () => move('left');
    document.querySelector('.right').onclick = () => move('right');

    init();
  </script>
</body>
</html>
